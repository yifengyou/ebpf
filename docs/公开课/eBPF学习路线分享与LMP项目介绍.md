# eBPF学习路线分享与LMP项目介绍

* <https://www.bilibili.com/video/BV1su411y71x?spm_id_from=333.999.0.0>

![20220417_205342_99](image/20220417_205342_99.png)

![20220417_205736_41](image/20220417_205736_41.png)

![20220417_205750_91](image/20220417_205750_91.png)

新类型软件

![20220417_205830_75](image/20220417_205830_75.png)

类比js蛮形象

![20220417_210328_55](image/20220417_210328_55.png)


![20220417_210538_79](image/20220417_210538_79.png)

![20220417_210545_39](image/20220417_210545_39.png)

查看当前系统当前已经存在的ebpf程序

![20220417_210553_62](image/20220417_210553_62.png)

如何光速跑起一个bpf程序

![20220417_210626_87](image/20220417_210626_87.png)

![20220417_210648_15](image/20220417_210648_15.png)

```
[root@rockylinux-ebpf ~/bpftrace/demo]# ./syscall.sh
Attaching 1 probe...
^C

@[syscall.sh]: 2
@[rsyslogd]: 9
@[smartd]: 19
@[hostname]: 30
@[tty]: 30
@[rs:main Q:Reg]: 33
@[dircolors]: 40
@[date]: 42
@[polkitd]: 43
@[rpcbind]: 56
@[sssd]: 57
@[tput]: 60
@[basename]: 70
@[cat]: 86
@[gdbus]: 131
@[NetworkManager]: 148
@[systemd-udevd]: 182
@[(tmpfiles)]: 193
@[anacron]: 210
@[lsmd]: 224
@[auditd]: 229
@[sed]: 242
@[grep]: 248
@[id]: 259
@[0anacron]: 271
@[systemd-machine]: 276
@[dbus-daemon]: 303
@[systemd-logind]: 416
@[run-parts]: 456
@[grepconf.sh]: 459
@[systemd-cgroups]: 478
@[logger]: 488
@[systemd-journal]: 795
@[sssd_be]: 838
@[gmain]: 844
@[sleep]: 952
@[crond]: 1387
@[pidof]: 1631
@[systemd]: 1839
@[bash]: 1923
@[irqbalance]: 2184
@[sssd_nss]: 2579
@[sshd]: 3130
@[systemd-tmpfile]: 3220
@[in:imjournal]: 3816
@[bpftool]: 6493
@[tuned]: 6838
@[awk]: 8540
@[ksmtuned]: 10696
@[bpftrace]: 16848
@[pgrep]: 44534
```

绝对不仅仅是工具

![20220417_210759_96](image/20220417_210759_96.png)


bpf内部原理不容错过

![20220417_210817_23](image/20220417_210817_23.png)

![20220417_210826_37](image/20220417_210826_37.png)

![20220417_210837_67](image/20220417_210837_67.png)

jit将字节码转为本机硬编码，高效率执行

![20220417_210921_14](image/20220417_210921_14.png)

![20220417_210945_92](image/20220417_210945_92.png)

![20220417_211157_21](image/20220417_211157_21.png)

![20220417_211306_53](image/20220417_211306_53.png)

![20220417_211329_77](image/20220417_211329_77.png)

![20220417_211335_92](image/20220417_211335_92.png)

![20220417_211556_85](image/20220417_211556_85.png)

![20220417_211604_72](image/20220417_211604_72.png)

![20220417_211739_17](image/20220417_211739_17.png)

![20220417_211823_85](image/20220417_211823_85.png)

![20220417_211832_87](image/20220417_211832_87.png)

![20220417_211924_90](image/20220417_211924_90.png)

![20220417_211932_30](image/20220417_211932_30.png)

![20220417_212035_96](image/20220417_212035_96.png)

![20220418_123347_70](image/20220418_123347_70.png)

BPF架手架

![20220418_123358_25](image/20220418_123358_25.png)

* <https://github.com/libbpf/libbpf-bootstrap>
* <https://gh.fakev.cn/libbpf/libbpf-bootstrap>

![20220418_123459_40](image/20220418_123459_40.png)

![20220418_123606_40](image/20220418_123606_40.png)

![20220418_123623_68](image/20220418_123623_68.png)

![20220418_123636_45](image/20220418_123636_45.png)

![20220418_123754_10](image/20220418_123754_10.png)

clang支持btf字段偏移重定位

![20220418_123851_65](image/20220418_123851_65.png)

解决可移植性问题

![20220418_123950_72](image/20220418_123950_72.png)

![20220418_124140_34](image/20220418_124140_34.png)

![20220418_124148_80](image/20220418_124148_80.png)

![20220418_124219_56](image/20220418_124219_56.png)

![20220418_124339_38](image/20220418_124339_38.png)

![20220418_124447_96](image/20220418_124447_96.png)

![20220418_124524_46](image/20220418_124524_46.png)

![20220418_124538_80](image/20220418_124538_80.png)

只允许使用辅助函数

LMP

![20220418_124651_32](image/20220418_124651_32.png)

![20220418_124704_40](image/20220418_124704_40.png)

![20220418_124803_78](image/20220418_124803_78.png)

![20220418_124908_76](image/20220418_124908_76.png)

![20220418_124920_66](image/20220418_124920_66.png)

![20220418_125003_19](image/20220418_125003_19.png)

![20220418_125134_52](image/20220418_125134_52.png)

![20220418_125344_10](image/20220418_125344_10.png)

![20220418_125353_33](image/20220418_125353_33.png)

![20220418_125512_32](image/20220418_125512_32.png)

![20220418_125614_22](image/20220418_125614_22.png)

![20220418_125642_32](image/20220418_125642_32.png)

![20220418_125735_88](image/20220418_125735_88.png)

![20220418_125747_92](image/20220418_125747_92.png)

![20220418_125837_53](image/20220418_125837_53.png)

![20220418_130015_94](image/20220418_130015_94.png)

![20220418_130319_79](image/20220418_130319_79.png)

![20220418_130344_34](image/20220418_130344_34.png)

![20220418_130421_78](image/20220418_130421_78.png)

![20220418_130536_74](image/20220418_130536_74.png) 

---
